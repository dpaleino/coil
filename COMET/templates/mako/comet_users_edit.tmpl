<%inherit file="base.tmpl"/>
<%block name="extra_head">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
</%block>
<%block name="content">
% if not new:
<h1 class="title">Editing user <tt>${user.username}</tt></h1>
% else:
<h1 class="title">Creating user <tt>${user.username}</tt></h1>
% endif

% if alert:
<div class="alert alert-${alert_status}" role="alert">${alert}</div>
% endif

<form action="/users/save" method="POST" class="form-horizontal">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Details</h3>
        </div>
        <div class="panel-body">

            <input name="uid" type="hidden" value="${user.uid}">
            <div class="form-group">
                <label for="name" class="col-sm-2 control-label">Real name</label>
                <div class="col-sm-10"><input class="form-control" id="realname" name="realname" value="${user.realname}" placeholder="Real name" required></div>
            </div>
            % if user.password:
            <div class="form-group">
                <label for="newpwd1" class="col-sm-2 control-label">New password</label>
                <div class="col-sm-10"><input type="password" class="form-control" id="newpwd1" name="newpwd1" placeholder="New password">
                    <p class="help-block">If you do not want to change the password, leave the fields blank.</p></div>
            </div>
            <div class="form-group">
                <label for="newpwd2" class="col-sm-2 control-label">Repeat password</label>
                <div class="col-sm-10"><input type="password" class="form-control" id="newpwd2" name="newpwd2" placeholder="Repeat password"></div>
            </div>
            % else:
            <div class="form-group">
                <label for="newpwd1" class="col-sm-2 control-label">Password</label>
                <div class="col-sm-10"><input type="password" class="form-control" id="newpwd1" name="newpwd1" placeholder="Password" required></div>
            </div>
            <div class="form-group">
                <label for="newpwd2" class="col-sm-2 control-label">Repeat password</label>
                <div class="col-sm-10"><input type="password" class="form-control" id="newpwd2" name="newpwd2" placeholder="Repeat password" required></div>
            </div>
            % endif
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Preferences</h3>
        </div>
        <div class="panel-body">
            <div class="checkbox"><label><input type="checkbox" name="wants_see_others_posts"
                    % if user.can_see_others_posts and user.wants_see_others_posts:
                    checked
                    % endif
                    % if not user.can_see_others_posts:
                    disabled
                    % endif
                > Show this user posts of other users
                </label></div>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Permissions</h3>
        </div>
        <div class="panel-body">
            <div class="checkbox"><label><input type="checkbox" name="is_admin"
                    % if user.is_admin:
                    checked
                    % endif
                    % if user == current_user:
                    disabled
                    % endif
                    > User is an administrator
                </label></div>
        </div>
    </div>

    <div style="text-align: center;">
        <button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-save"></i> Save</button>
    </div>
</form>

</%block>
